<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Örnek Fotoğraf Test Sayfası</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Örnek Fotoğraf Görüntüleme Testi</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Test Görevi (Örnek Fotoğraf Var)</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Görev Adı:</strong> Test Görevi</p>
                        <p><strong>Kategori:</strong> Reyon</p>
                        <p><strong>Durum:</strong> Aktif</p>
                        <p><strong>Açıklama:</strong> Bu görevde örnek fotoğraf bulunmaktadır.</p>
                        <button class="btn btn-primary" onclick="testTaskWithPhoto()">
                            <i class="fas fa-eye me-1"></i>Görev Detayını Görüntüle
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Test Görevi (Örnek Fotoğraf Yok)</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Görev Adı:</strong> Test Görevi 2</p>
                        <p><strong>Kategori:</strong> Sepet</p>
                        <p><strong>Durum:</strong> Aktif</p>
                        <p><strong>Açıklama:</strong> Bu görevde örnek fotoğraf bulunmamaktadır.</p>
                        <button class="btn btn-primary" onclick="testTaskWithoutPhoto()">
                            <i class="fas fa-eye me-1"></i>Görev Detayını Görüntüle
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Test Sonuçları</h5>
                    </div>
                    <div class="card-body">
                        <div id="test-results"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Görev Detay Modal -->
    <div class="modal fade" id="taskModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taskModalTitle">Görev Detayı</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Görev Bilgileri</h6>
                            <p><strong>Kategori:</strong> <span id="modal-category">-</span></p>
                            <p><strong>Başlangıç:</strong> <span id="modal-start-date">-</span></p>
                            <p><strong>Bitiş:</strong> <span id="modal-end-date">-</span></p>
                            <p><strong>Durum:</strong> <span id="modal-status">-</span></p>
                        </div>
                        <div class="col-md-6">
                            <h6>Görev Açıklaması</h6>
                            <p id="modal-description">-</p>
                        </div>
                    </div>
                    
                    <!-- Örnek Fotoğraf Bölümü -->
                    <div class="row mt-3" id="example-photo-section" style="display: none;">
                        <div class="col-12">
                            <h6>Örnek Fotoğraf</h6>
                            <div class="text-center">
                                <img id="modal-example-photo" src="" alt="Örnek Fotoğraf" class="img-fluid rounded" style="max-height: 300px; max-width: 100%;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Test fonksiyonları
        function testTaskWithPhoto() {
            const task = {
                id: 1,
                title: 'Test Görevi',
                description: 'Bu görevde örnek fotoğraf bulunmaktadır.',
                category: 'Reyon',
                startDate: '2024-01-01',
                endDate: '2024-01-31',
                status: 'Aktif',
                examplePhotoUrl: 'example_1.jpg' // Örnek fotoğraf var
            };
            
            openTaskModal(task);
            logTestResult('Görev örnek fotoğraf ile test edildi', 'success');
        }
        
        function testTaskWithoutPhoto() {
            const task = {
                id: 2,
                title: 'Test Görevi 2',
                description: 'Bu görevde örnek fotoğraf bulunmamaktadır.',
                category: 'Sepet',
                startDate: '2024-01-01',
                endDate: '2024-01-31',
                status: 'Aktif',
                examplePhotoUrl: null // Örnek fotoğraf yok
            };
            
            openTaskModal(task);
            logTestResult('Görev örnek fotoğraf olmadan test edildi', 'info');
        }
        
        function openTaskModal(task) {
            // Modal içeriğini doldur
            document.getElementById('taskModalTitle').textContent = task.title;
            document.getElementById('modal-category').textContent = task.category;
            document.getElementById('modal-start-date').textContent = task.startDate;
            document.getElementById('modal-end-date').textContent = task.endDate;
            document.getElementById('modal-status').textContent = task.status;
            document.getElementById('modal-description').textContent = task.description;
            
            // Örnek fotoğrafı göster/gizle
            const examplePhotoSection = document.getElementById('example-photo-section');
            const examplePhotoImg = document.getElementById('modal-example-photo');
            
            if (task.examplePhotoUrl) {
                // Test için placeholder fotoğraf kullan
                const photoUrl = `https://via.placeholder.com/400x300/007bff/ffffff?text=Örnek+Fotoğraf`;
                examplePhotoImg.src = photoUrl;
                examplePhotoSection.style.display = 'block';
                
                // Fotoğraf yüklenme hatası durumunda
                examplePhotoImg.onerror = function() {
                    console.error('Örnek fotoğraf yüklenemedi:', photoUrl);
                    examplePhotoSection.style.display = 'none';
                };
            } else {
                examplePhotoSection.style.display = 'none';
            }
            
            // Modal'ı aç
            const modal = new bootstrap.Modal(document.getElementById('taskModal'));
            modal.show();
        }
        
        function logTestResult(message, type) {
            const resultsDiv = document.getElementById('test-results');
            const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-info-circle';
            
            resultsDiv.innerHTML += `
                <div class="alert ${alertClass}">
                    <i class="fas ${icon} me-2"></i>${message}
                </div>
            `;
        }
    </script>
</body>
</html>
